{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Link,useParams}from'react-router-dom';import{getContact}from'../api/ContactService';import{toastError,toastSuccess}from'../api/ToastService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ContactDetail=_ref=>{let{updateContact,updateImage}=_ref;const inputRef=useRef();const[contact,setContact]=useState({id:'',name:'',email:'',phone:'',address:'',title:'',status:'',photoUrl:''});const{id}=useParams();const fetchContact=async id=>{try{const{data}=await getContact(id);setContact(data);console.log(data);//toastSuccess('Contact retrieved');\n}catch(error){console.log(error);toastError(error.message);}};const selectImage=()=>{inputRef.current.click();};const udpatePhoto=async file=>{try{const formData=new FormData();formData.append('file',file,file.name);formData.append('id',id);await updateImage(formData);setContact(prev=>({...prev,photoUrl:\"\".concat(prev.photoUrl,\"?updated_at=\").concat(new Date().getTime())}));toastSuccess('Photo updated');}catch(error){console.log(error);toastError(error.message);}};const onChange=event=>{setContact({...contact,[event.target.name]:event.target.value});};const onUpdateContact=async event=>{event.preventDefault();await updateContact(contact);fetchContact(id);toastSuccess('Contact Updated');};useEffect(()=>{fetchContact(id);},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Link,{to:'/contacts',className:\"link\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left\"}),\" Back to list\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile__details\",children:[/*#__PURE__*/_jsx(\"img\",{src:contact.photoUrl,alt:\"Profile photo of \".concat(contact.name)}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__metadata\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile__name\",children:contact.name}),/*#__PURE__*/_jsx(\"p\",{className:\"profile__muted\",children:\"JPG, GIF, or PNG. Max size of 10MG\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:selectImage,className:\"btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-cloud-upload\"}),\" Change Photo\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile__settings\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onUpdateContact,className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",defaultValue:contact.id,name:\"id\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.name,onChange:onChange,name:\"name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.email,onChange:onChange,name:\"email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.phone,onChange:onChange,name:\"phone\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.address,onChange:onChange,name:\"address\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.title,onChange:onChange,name:\"title\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Status\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.status,onChange:onChange,name:\"status\",required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",children:\"Save\"})})]})})})]}),/*#__PURE__*/_jsx(\"form\",{style:{display:'none'},children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:inputRef,onChange:event=>udpatePhoto(event.target.files[0]),name:\"file\",accept:\"image/*\"})})]});};export default ContactDetail;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useParams","getContact","toastError","toastSuccess","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ContactDetail","_ref","updateContact","updateImage","inputRef","contact","setContact","id","name","email","phone","address","title","status","photoUrl","fetchContact","data","console","log","error","message","selectImage","current","click","udpatePhoto","file","formData","FormData","append","prev","concat","Date","getTime","onChange","event","target","value","onUpdateContact","preventDefault","children","to","className","src","alt","onClick","onSubmit","type","defaultValue","required","style","display","ref","files","accept"],"sources":["C:/Users/ertan/Desktop/deneme/contactapp/src/components/ContactDetail.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { getContact } from '../api/ContactService';\r\nimport { toastError, toastSuccess } from '../api/ToastService';\r\n\r\nconst ContactDetail = ({ updateContact, updateImage }) => {\r\n    const inputRef = useRef();\r\n    const [contact, setContact] = useState({\r\n        id: '',\r\n        name: '',\r\n        email: '',\r\n        phone: '',\r\n        address: '',\r\n        title: '',\r\n        status: '',\r\n        photoUrl: ''\r\n    });\r\n\r\n    const { id } = useParams();\r\n\r\n    const fetchContact = async (id) => {\r\n        try {\r\n            const { data } = await getContact(id);\r\n            setContact(data);\r\n            console.log(data);\r\n            //toastSuccess('Contact retrieved');\r\n        } catch (error) {\r\n            console.log(error);\r\n            toastError(error.message);\r\n        }\r\n    };\r\n\r\n    const selectImage = () => {\r\n        inputRef.current.click();\r\n    };\r\n\r\n    const udpatePhoto = async (file) => {\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('file', file, file.name);\r\n            formData.append('id', id);\r\n            await updateImage(formData);\r\n            setContact((prev) => ({ ...prev, photoUrl: `${prev.photoUrl}?updated_at=${new Date().getTime()}` }));\r\n            toastSuccess('Photo updated');\r\n        } catch (error) {\r\n            console.log(error);\r\n            toastError(error.message);\r\n        }\r\n    };\r\n\r\n    const onChange = (event) => {\r\n        setContact({ ...contact, [event.target.name]: event.target.value });\r\n    };\r\n\r\n    const onUpdateContact = async (event) => {\r\n        event.preventDefault();\r\n        await updateContact(contact);        \r\n        fetchContact(id);\r\n        toastSuccess('Contact Updated');\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchContact(id);\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <Link to={'/contacts'} className='link'><i className='bi bi-arrow-left'></i> Back to list</Link>\r\n            <div className='profile'>\r\n                <div className='profile__details'>\r\n                    <img src={contact.photoUrl} alt={`Profile photo of ${contact.name}`} />\r\n                    <div className='profile__metadata'>\r\n                        <p className='profile__name'>{contact.name}</p>\r\n                        <p className='profile__muted'>JPG, GIF, or PNG. Max size of 10MG</p>\r\n                        <button onClick={selectImage} className='btn'><i className='bi bi-cloud-upload'></i> Change Photo</button>\r\n                    </div>\r\n                </div>\r\n                <div className='profile__settings'>\r\n                    <div>\r\n                        <form onSubmit={onUpdateContact} className=\"form\">\r\n                            <div className=\"user-details\">\r\n                                <input type=\"hidden\" defaultValue={contact.id} name=\"id\" required />\r\n                                <div className=\"input-box\">\r\n                                    <span className=\"details\">Name</span>\r\n                                    <input type=\"text\" value={contact.name} onChange={onChange} name=\"name\" required />\r\n                                </div>\r\n                                <div className=\"input-box\">\r\n                                    <span className=\"details\">Email</span>\r\n                                    <input type=\"text\" value={contact.email} onChange={onChange} name=\"email\" required />\r\n                                </div>\r\n                                <div className=\"input-box\">\r\n                                    <span className=\"details\">Phone</span>\r\n                                    <input type=\"text\" value={contact.phone} onChange={onChange} name=\"phone\" required />\r\n                                </div>\r\n                                <div className=\"input-box\">\r\n                                    <span className=\"details\">Address</span>\r\n                                    <input type=\"text\" value={contact.address} onChange={onChange} name=\"address\" required />\r\n                                </div>\r\n                                <div className=\"input-box\">\r\n                                    <span className=\"details\">Title</span>\r\n                                    <input type=\"text\" value={contact.title} onChange={onChange} name=\"title\" required />\r\n                                </div>\r\n                                <div className=\"input-box\">\r\n                                    <span className=\"details\">Status</span>\r\n                                    <input type=\"text\" value={contact.status} onChange={onChange} name=\"status\" required />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form_footer\">\r\n                                <button type=\"submit\" className=\"btn\">Save</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <form style={{ display: 'none' }}>\r\n                <input type='file' ref={inputRef} onChange={(event) => udpatePhoto(event.target.files[0])} name='file' accept='image/*' />\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ContactDetail;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}